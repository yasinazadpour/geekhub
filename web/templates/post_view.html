{% extends './base.html' %}
{% load posts_extra %}
{% block main %}
{% autoescape off %}
<main class="w-full max-w-6xl">
    <article class="p-4 sm:p-6">
        <h1>{{post.title|title}}</h1>
        <span class="block overflow-hidden h-min relative after:absolute after:left-0 after:h-full after:w-32 after:bg-gradient-to-r after:from-white whitespace-nowrap">
            {% for tag in post.tags.all %}
                <a
                name="{{tag.name}}"
                href="/tags/{{tag.name}}"
                class="hover:underline focus-visible:underline mr-2 text-{{tag.pk|gencol}} cursor-pointer first:mr-0"
                >
                <i class="bi bi-hash"></i>
                <span class="text-gray-700">
                    {{tag.name}}
                </span>
                </a>
            {% endfor %}
            </span>
        <img src="{{post.image.url}}" alt="عکس پست"  class="w-full aspect-video max-h-[none]"/>
        {{post.text|markdown}}

        <div class="share flex w-full items-center justify-center mb-4 mt-6">
            {# TODO #}
            <button title="کپی کردن لینک" class="rounded-full p-4 h-14 aspect-square border-[1px] sm:border-2 flex items-center justify-center text-slate-700 mx-1"><i class="bi bi-link-45deg"></i></button>
            <button title="اشتراک گذاری در توییتر" class="rounded-full p-4 h-14 aspect-square border-[1px] sm:border-2 flex items-center justify-center text-slate-700 mx-1"><i class="bi bi-twitter"></i></button>
            <button title="اشتراک گذاری در تلگرام" class="rounded-full p-4 h-14 aspect-square border-[1px] sm:border-2 flex items-center justify-center text-slate-700 mx-1"><i class="bi bi-telegram"></i></button>
            <button title="اشتراک گذاری در ردیت" class="rounded-full p-4 h-14 aspect-square border-[1px] sm:border-2 flex items-center justify-center text-slate-700 mx-1"><i class="bi bi-reddit"></i></button>
        </div>
        
        <div class="w-full flex justify-between mt-4 px-6">
            <span class="text-slate-600"><span class="text-slate-800">{{post.views}}</span> بازدید</span>
            <button title="نمایش نظرات" class="text-slate-600"><span class="text-slate-800">{{post.comments.count}}</span> نظر</button>
        </div>
    </article>
    <hr class="my-8 mx-10">
    <h2 class="text-3xl mr-4 mb-4">پست های مرتبط</h2>
    <div class="px-4 sm:px-6">
        {% for thispost in related %}
            {% if thispost.pk != post.pk %}
                {% include './post.html' with post=thispost %}
            {% endif %}
        {% endfor %}
    </div>

</main>
{% endautoescape %}
{% endblock main %}