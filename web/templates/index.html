{% extends './base.html' %}
{% load posts_extra %}

{% block main %}
<main class="flex flex-col items-center justify-center xl:flex-row w-full xl:items-start">
  <main class="p-4 sm:p-6 max-w-6xl w-full">
    <header class="flex items-center justify-center py-2">
      
      {% if request.GET.q == 'top' %}
        <a title="Ù†Ù…Ø§ÛŒØ´ Ø¢Ø®Ø±ÛŒÙ† Ù¾Ø³Øª Ù‡Ø§ÛŒ Ù…Ù†ØªØ´Ø± Ø´Ø¯Ù‡" class="border-b-[1px] sm:border-b-2 px-3 py-2 dark:border-slate-500 dark:text-slate-100" href="/">Ø¢Ø®Ø±ÛŒÙ† Ù‡Ø§ </a>
        <a title="Ù†Ù…Ø§ÛŒØ´ Ø¨Ø±ØªØ±ÛŒÙ† Ù¾Ø³Øª Ù‡Ø§ÛŒ Ù…Ù†ØªØ´Ø± Ø´Ø¯Ù‡" class="border-b-[1px] sm:border-b-2 px-3 py-2 border-indigo-500 text-indigo-500" href="?q=top">Ø¨Ø±ØªØ±ÛŒÙ† Ù‡Ø§</a>
      {% else %}
        <a title="Ù†Ù…Ø§ÛŒØ´ Ø¢Ø®Ø±ÛŒÙ† Ù¾Ø³Øª Ù‡Ø§ÛŒ Ù…Ù†ØªØ´Ø± Ø´Ø¯Ù‡" class="border-b-[1px] sm:border-b-2 px-3 py-2 border-indigo-500 text-indigo-500" href="/">Ø¢Ø®Ø±ÛŒÙ† Ù‡Ø§ </a>
        <a title="Ù†Ù…Ø§ÛŒØ´ Ø¨Ø±ØªØ±ÛŒÙ† Ù¾Ø³Øª Ù‡Ø§ÛŒ Ù…Ù†ØªØ´Ø± Ø´Ø¯Ù‡" class="border-b-[1px] sm:border-b-2 px-3 py-2 dark:border-slate-500 dark:text-slate-100" href="?q=top">Ø¨Ø±ØªØ±ÛŒÙ† Ù‡Ø§</a>
      {% endif %}
    </header>
  
    <div id="posts">
      {% for post in page.object_list %}

      {# a post #}
      {% include './post.html' with post=post %}

      {% endfor %}
      
    </div>
    
    {% include './paginator.html' with page=page %}

  </main>
  <aside class="xl:sticky xl:top-14 w-full xl:w-[unset] xl:px-3 xl:max-w-[28rem] sm:px-10 px-4 min-w-[25vw]">
    {% if tags %}  
      <div
        id="tags"
        class="h-5/6 left-0 rounded-tr-2xl rounded-tl-2xl fixed xl:relative xl:bottom-[unset] xl:block w-full xl:max-h-screen overflow-hidden z-30 xl:z-10 bg-white dark:bg-black  xl:rounded-2xl xl:my-4 border-[1px] sm:border-2 border-slate-100 dark:border-gray-900 -bottom-full"
      >
        <button
          onclick="$('#tags').toggleClass('-bottom-full bottom-0');$('#tags #close').toggleClass('opacity-0 pointer-events-none');$('body').removeClass('overflow-hidden')"
          class="p-2 w-full flex items-center justify-center xl:w-auto xl:h-full xl:right-0 xl:absolute xl:hidden"
        >
          <div class="rounded-full bg-gray-200 w-20 h-1 xl:h-20 xl:w-1"></div>
        </button>

        <h1 class="text-3xl text-slate-700 m-2 dark:text-slate-200">Ø¨Ø±Ú†Ø³Ø¨ Ù‡Ø§</h1>
        <ul class="max-h-[50vh] overflow-auto">
          {% for tag in tags %}
          <li>
            <a
              title="Ù†Ù…Ø§ÛŒØ´ Ù¾Ø³Øª Ù‡Ø§ÛŒ Ø§ÛŒÙ† Ø¨Ø±Ú†Ø³Ø¨"
              href="/tags/{{tag.name}}"
              class="px-3 flex items-center text-7xl text-{{tag.pk|gencol}} w-full hover:bg-gray-100 focus-visible:bg-gray-100   dark:hover:bg-gray-900 dark:focus-visible:bg-gray-900"
            >
              <i class="bi bi-hash"></i>
              <span class="flex flex-col mr-2">
                <span class="text-xl text-gray-700 dark:text-slate-200">{{tag.name}}</span>
                  <span class="text-lg text-gray-500 dark:text-slate-400">{{tag.posts.count}} Ù¾Ø³Øª</span> 
              </span>
            </a>
          </li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}
    
    {% if hotlinks or request.user.is_superuser %}
      <div class=" w-full  xl:max-h-screen overflow-hidden bg-white dark:bg-black rounded-2xl my-4 border-[1px] sm:border-2 border-slate-100 pb-3  dark:border-slate-900" id="hotlinks">
        <h1 class="m-3 text-2xl dark:text-slate-200">Ù„ÛŒÙ†Ú© Ù‡Ø§ÛŒ Ø¯Ø§Øº ğŸ”¥ </h1>
        <ul class="overflow-auto">
          {% for hlink in hotlinks %}
            <li class="w-full px-2 mb-2">
              <a title="Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ù„ÛŒÙ†Ú©" href="{{hlink.url}}" target="_blank" class="p-3 hover:bg-gray-100 focus-visible:bg-gray-100 dark:hover:bg-gray-900 dark:focus-visible:bg-gray-900 block  rounded-xl border-[1px] sm:border-2 text-md w-full dark:text-slate-100 dark:border-slate-900">{{hlink.name}}</a>
            </li>
          {% endfor %}
          {% if request.user.is_superuser %}
          <li class="w-full px-2 mb-2">
            <a title="Ø§ÙØ²ÙˆØ¯Ù† Ù„ÛŒÙ†Ú© Ø¬Ø¯ÛŒØ¯" target="_blank" href="/admin/posts/hotlink/add/" class="p-3 hover:bg-gray-100 focus-visible:bg-gray-100 dark:hover:bg-gray-900 dark:focus-visible:bg-gray-900 block  rounded-xl border-[1px] sm:border-2 text-md w-full border-dashed dark:border-slate-900 dark:text-slate-100"><i class="bi bi-plus-circle text-xl ml-3" ></i>Ø§ÙØ²ÙˆØ¯Ù† Ù„ÛŒÙ†Ú© Ø¬Ø¯ÛŒØ¯</a>
          </li>
          {% endif %}
        </ul>
      </div>
    {% endif %}
  </aside>
</main>
{% endblock main %}