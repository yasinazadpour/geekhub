{% load posts_extra %}
<div class="post my-2 first:mt-1 border-slate-100 rounded-xl p-3 border-[1px] sm:border-[2px] flex justify-between flex-col-reverse sm:flex-row relative">
    <div class="sm:w-3/5 md:w-3/5 xl:w-3/5 flex flex-col justify-between pt-3 sm:pl-3" >
        <div class="sm:relative">
            <div title="{{post.date}}" class="absolute top-0 left-0 bg-gray-100 py-1 px-2 rounded-full text-gray-500 m-4 sm:m-0">
            {{post.date|tsince|cut:'ها'}} پیش
            </div>
            <h2 dir="rtl" class="text-2xl font-bold hover:underline cursor-pointer sm:w-3/4">
            <a href="/{{post.slug}}" class="hover:underline focus-visible:underline block" >{{post.title}}</a>
            </h2>
            <p class="my-1 text-gray-800" dir="rtl">
            {{post.text|truncatechars:100|markdown|striptags}}
            </p>
        </div>

        <span class="block overflow-hidden h-min relative after:absolute after:left-0 after:h-full after:w-32 after:bg-gradient-to-r after:from-white whitespace-nowrap">
        {% for tag in post.tags.all %}
            <a
            name="{{tag.name}}"
            href="/tags/{{tag.name}}"
            class="hover:underline focus-visible:underline mr-2 text-{{tag.pk|gencol}} cursor-pointer first:mr-0"
            >
            <i class="bi bi-hash"></i>
            <span class="text-gray-700">
                {{tag.name}}
            </span>
            </a>
        {% endfor %}
        </span>
    </div>
    <div class="aspect-video overflow-hidden rounded-lg sm:w-2/5 md:w-2/5 xl:w-2/5 flex items-center bg-[url({{post.image.url}})] bg-center bg-cover"></div>
</div>