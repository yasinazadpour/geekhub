{% load posts_extra %}
<!DOCTYPE html>
<html lang="fa" dir="rtl">
    {% include './head.html' %}
<body class="">
    <main class="overflow-auto w-full h-screen flex justify-between items-center flex-col">
        <span></span>
        <form action="" method="POST" class="border-[1px] flex flex-col items-center px-4 py-6 rounded-xl sm:border-2 my-6">
            <input type="hidden" name="token" value="{{request.GET.token}}">
            <h1 id="title" class="text-3xl">تعویض گذرواژه</h1>
            {% if can_reset %}
                <p id="about" class="mt-2 text-gray-500">تنظیم گذرواژه جدید</p>
            {% elif msg %}
                <p id="about" class="mt-2 text-red-500">{{ msg }}</p>
            {% else %}
                <p id="about" class="mt-2 text-gray-500">تعویض گذرواژه با گذرواژه فعلی</p>
            {% endif %}
            
            {% if not can_reset %}
            <div class="w-[20rem] mt-4">
                <input dir="auto" name="old_password" autocomplete="current-password" type="password" class="bg-gray-100 px-3 py-2 rounded-xl w-full" placeholder= "گذرواژه فعلی" required>
                <span class="px-3 text-red-500 text-sm min-h-">{{form.errors.old_password|first}}</span>
            </div>
            {% endif %}
            <div class="w-[20rem] mt-4">
                <input dir="auto" name="new_password1" autocomplete="new-password" type="password" class="bg-gray-100 px-3 py-2 rounded-xl w-full" placeholder= "گذرواژه جدید" required>
                <span class="px-3 text-red-500 text-sm min-h-">{{form.errors.new_password1|first}}</span>
            </div>
            <div class="w-[20rem] mt-4">
                <input dir="auto" name="new_password2" autocomplete="new-password" type="password" class="bg-gray-100 px-3 py-2 rounded-xl w-full" placeholder="تایید گذرواژه" required>
                <span class="px-3 text-red-500 text-sm min-h-">{{form.errors.new_password2|first}}</span>
            </div>

            {% csrf_token %}
            <button type="submit" class="active:scale-[0.98] bg-gray-900 px-8 py-3 rounded-full text-lg text-white w-full mt-8 active:opacity-90">تعویض</button>
            
            <div class="help mt-3">
                <a href="/reset-password" class="text-indigo-500">بازیابی رمز عبور</a>
            </div>
        </form>
        <span dir="ltr" id="copytihgt" class="mb-4 text-gray-700 text-sm">© site.com {% now "Y" %}. All right reserved.</span>
    </main>
</body>
</html>